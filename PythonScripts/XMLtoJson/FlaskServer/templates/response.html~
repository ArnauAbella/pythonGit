 <html>
    <head>
        <title>XML&JSON</title>
        <link rel=stylesheet type=text/css href="{{ url_for('static', filename='style.css') }}">
    </head>
    <body>
        <div id="container">
            <div class="title">
                <h1>Translated XML - JSON</h1>
            </div>
            <div id="content">
               	{{jsonXML}}
            </div>
            <div class="title">
                <h1>Flask code</h1>
            </div>
                <code><pre>
@app.route('/translate', methods=['POST'])
def translate():
	# check if the post request has the file part
	if 'jsonXML' not in request.files:
		print('User modified html')
		return render_template('response.html', jsonXML="DON'T BE TRICKY")
	jsonXML=request.files['jsonXML']
	# if user does not select file, browser also
	# submit a empty part without filename
	if jsonXML.filename == '':
		print('No selected file')
		return render_template('response.html', jsonXML="YOU MUST SELECT A FILE TO CONVERT")
	#Check file type
	if jsonXML and allowed_file(jsonXML.filename):
		filename = secure_filename(jsonXML.filename)
		print("File name secured as: {}".format(filename))
		#convert byte to string
		mode = jsonXML.filename.rsplit('.', 1)[1]
		text = jsonXML.read().decode('utf-8')
		res = "SOMETHING WENT WRONG :("
		if mode == 'xml': #XML TO JSON
			if not(type(text) is str):
				print('xml text is not a str')
			else:
				#XML -> dict
				xmlRoot = ElementTree.XML(text)
				xmlDict = XmlDictConfig(xmlRoot)
				#dict -> json
				res = json.dumps(xmlDict, skipkeys=False, ensure_ascii=True,check_circular=True, allow_nan=True, cls=None,indent=None, separators=None,default=None)
		else: #JSON TO XML
			if not(type(text) is str):
				print('json text is not a str')
			else:
				#JSON -> dict 	
				jsonDict = json.loads(text)
				#dict -> XML
				res = dicttoxml.dicttoxml(jsonDict, attr_type=False, custom_root='rootElement').decode('utf-8')
				#Pretty String not working :(
				#xmldom = parseString(res)
				#print(xmldom.toprettyxml())
		#Return function
		return render_template('response.html', jsonXML=res)
	else:
		print('Wrong File Extension')
		return render_template('response.html', jsonXML="FILE IS NOT .json or .xml")

                </pre></code>
            </div>
        </div>
    </body>
</html>
